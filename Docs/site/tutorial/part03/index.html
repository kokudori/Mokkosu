<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>第3章 リストとタプル - プログラミング言語 Mokkosu</title>

        <link href="../../css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link href="../../css\extra.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">プログラミング言語 Mokkosu</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">始め方 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../start/install">インストールと実行</a>
                        </li>
                    
                        <li >
                            <a href="../../start/beginner">プログラミング初心者向け</a>
                        </li>
                    
                        <li >
                            <a href="../../start/programmer">プログラミング経験者向け</a>
                        </li>
                    
                        <li >
                            <a href="../../start/fptomok">関数型言語経験者向け</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">チュートリアル <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../part01">第1章 はじめよう</a>
                        </li>
                    
                        <li >
                            <a href="../part02">第2章 基本的な構文と型</a>
                        </li>
                    
                        <li class="active">
                            <a href=".">第3章 リストとタプル</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">言語 <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../lang/basic">基本事項</a>
                        </li>
                    
                        <li >
                            <a href="../../lang/statement">文</a>
                        </li>
                    
                        <li >
                            <a href="../../lang/type">型とリテラル</a>
                        </li>
                    
                        <li >
                            <a href="../../lang/expression">式</a>
                        </li>
                    
                        <li >
                            <a href="../../lang/pattern">パターン</a>
                        </li>
                    
                        <li >
                            <a href="../../lang/dotnet">.NET関連の式</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">ライブラリ <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../library/corelib">コアライブラリ</a>
                        </li>
                    
                        <li >
                            <a href="../../library/list">リストライブラリ</a>
                        </li>
                    
                        <li >
                            <a href="../../library/print">表示関数ライブラリ</a>
                        </li>
                    
                        <li >
                            <a href="../../library/graphics">グラフィックスライブラリ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li >
                    <a href="../../sample">サンプル</a>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../part02">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../../lang/basic">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/lambdataro/Mokkosu">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#3">第3章 リストとタプル</a></li>
        
            <li><a href="#_1">リスト</a></li>
        
            <li><a href="#_2">パターンマッチ</a></li>
        
            <li><a href="#_3">多相型</a></li>
        
            <li><a href="#for">for式</a></li>
        
            <li><a href="#_4">タプル</a></li>
        
            <li><a href="#_5">連想リスト</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="3">第3章 リストとタプル</h1>
<h2 id="_1">リスト</h2>
<p>リストは<code>[1, 2, 3]</code>のように同じ型の値を並べたデータ構造です。
Mokkosuはリストを簡単に扱える仕組みを用意しています。</p>
<p>リストは<code>[1, 2, 3]</code>のように<code>[</code>と`]の間に要素を並べることで
構築できます。</p>
<p>リストから要素を取り出すには<code>nth</code>関数を使います。</p>
<p>以下のプログラムでは整数のリストを構築してその2番目(先頭は0)の要素を
取り出して表示しています。</p>
<pre><code>let list = [1, 2, 3, 4, 5];
println (nth list 2);
</code></pre>

<p>実行すると以下のように表示されます。</p>
<pre><code>list : [Int]

3
</code></pre>

<p>リストの型は、要素の型が<code>α</code>のとき<code>[α]</code>と表します。</p>
<p>二つのリストを連結するには<code>++</code>演算子を、
リストの先頭に要素を追加するときは<code>::</code>演算子を使います。</p>
<p>上の式を実行すると、偶数の要素だけ残したリスト、すなわち<code>[2,4]</code>が得られます。</p>
<h2 id="_2">パターンマッチ</h2>
<p>パターンマッチを使うとリストを分解することができます。</p>
<p>以下のプログラムは、リストのパターンマッチを使って、
リストの全要素を2倍するプログラムの例です。</p>
<pre><code>fun double_list list =
  match list {
    [] -&gt; [];
    x :: xs -&gt; x * 2 :: double_list xs;
  };
</code></pre>

<p><code>{</code>と<code>}</code>の間で場合分けを記述します。
まず、空リスト<code>[]</code>の場合は空リスト<code>[]</code>を返しています。
次にリストを先頭要素<code>x</code>と先頭以外の要素<code>xs</code>に分解できる場合は、
<code>x * 2 :: double_list xs</code>を計算します。
自分自身を再帰的に呼び出すことで、リストの全要素を2倍します。
<code>double_list</code>の型は以下のようになります。</p>
<pre><code>double_list : [Int] -&gt; [Int]
</code></pre>

<h3 id="31">練習問題 3.1</h3>
<h2 id="_3">多相型</h2>
<p>以下はリストの全要素を表示する関数の定義例です。</p>
<pre><code>fun print_list list =
  match list {
    [] -&gt; ();
    x :: xs -&gt; do println x in print_list xs;
  };
</code></pre>

<p>この関数の型は以下のようになります。</p>
<pre><code>print_list : [α] -&gt; ()
</code></pre>

<p>この関数は任意のリスト型に関して実行することができます。
ただし、<code>println</code>関数の制限から、整数、浮動小数点数、文字列、
文字の場合しか正しく表示されません。
以下は<code>print_list [1, 2, 3]</code>の実行例です。</p>
<pre><code>1
2
3
</code></pre>

<h3 id="32">練習問題 3.2</h3>
<p>リストを反転する関数を定義してください。</p>
<h2 id="for">for式</h2>
<p>リスト操作を行う際は、for式を使うと便利です。
以下はfor式を使ってリストのすべての要素を2倍するプログラムの例です。</p>
<pre><code>let list = for x &lt;- [1, 2, 3] in x * x;
print_list list;
</code></pre>

<p>実行すると以下のように表示されます。</p>
<pre><code>2
4
6
</code></pre>

<p>for式にif節を追加すると、
条件に合致したもののみ結果のリストに残すことができます。</p>
<pre><code>let list =
  for x &lt;- [1, 2, 3, 4, 5];
      if x % 2 == 0
  in x;
print_list list;
</code></pre>

<p>実行すると以下のように表示されます。</p>
<pre><code>2
4
</code></pre>

<p>forは以下のように複数のリストに対して使うこともできます。</p>
<pre><code>let list =
  for x &lt;- [10, 20];
      y &lt;- [1, 2, 3];
  in x + y;
print_list list;
</code></pre>

<p>実行すると以下のように表示されます。</p>
<pre><code>11
12
13
21
22
23
</code></pre>

<h3 id="33">練習問題 3.3</h3>
<p>整数リストから2の倍数または3の倍数の要素のみを抽出する関数を定義してください。</p>
<h2 id="_4">タプル</h2>
<p>複数の異なる型の値を組にしたものをタプルとよびます。
例えば<code>1</code>と<code>"abc"</code>を組にした<code>(1, "abc")</code>は<code>(Int, String)</code>型のタプルです。</p>
<p>タプルを構築するには括弧の間に値をコンマで区切って指定します。
タプルを分解するにはパターンマッチを使います。</p>
<p>以下は2要素タプルの左右の要素を入れ替える関数の定義です。</p>
<pre><code>fun swap tuple =
  match tuple {
    (x, y) -&gt; (y, x)
  };
</code></pre>

<p>関数の型は以下のようになります。</p>
<pre><code>swap : (α, β) -&gt; (β, α)
</code></pre>

<h2 id="_5">連想リスト</h2>
<p>リストとタプルの重要な応用に連想リストがあります。
連想リストは、</p>
<pre><code>let alist = [ (&quot;a&quot;, 12), (&quot;b&quot;, 5), (&quot;c&quot;, 62) ];
</code></pre>

<p>のようなリストで、キーと値のペアをリストにしたものです。</p>
<p>以下はこの連想リストからキーを指定して値を探索する関数です。</p>
<pre><code>fun lookup key alist =
  match alist {
    [] -&gt; error &quot;Not found&quot;;
    (x, v) :: rest -&gt;
      if x == key -&gt; v
      else lookup key rest;
  };
</code></pre>

<p>例えば<code>lookup "b" alist</code>を実行すると<code>5</code>が返ってきます。</p>
<h3 id="34">練習問題 3.4</h3>
<p>リストをソートする関数を書いてください。</p>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
    </body>
</html>